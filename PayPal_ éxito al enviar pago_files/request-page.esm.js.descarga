(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{1059:function(e,t,n){"use strict";var i=n(861),s=n(2),r=n.n(s),a=n(4),c=n.n(a),o=n(11),l=n.n(o),p=n(212),u=n.n(p),h=n(0),d=n.n(h),m=(n(6),n(19)),b=n(209),g=n.n(b),R=n(52),C=n(256),E=n(15),S=n(119),y=n(57),f=n(8),v=n(1007),O=n(971),x=n(39),I=n(50),T=n(894),w=n(68),j=n(56),P=n(949),B=n(901),N=n(9),k=n(997),D=n(938),q=n(1009),F=n(1),_=n(893),L=n(1004),A=n(980),U=n(41),H=n(61),V=n(208),M=n(40),z=n(29),G=n(60);const W=m.h.div({display:"flex",alignItems:"center",justifyContent:"space-evenly",width:"4.5rem",color:"#687173",marginTop:"-0.5rem",[z.i]:{marginTop:"-0.25rem"},[z.g]:{marginTop:"-1rem"}}),J=m.h.span({display:"block"});function Z(){return d.a.createElement("span",{className:"ppvx_icon ppvx_icon--size_sm ppvx_icon-money-pools"})}const $=m.h.div({display:"flex",alignItems:"center"}),K=Object(M.css)({color:V.eb,marginRight:"0.25rem"}),Q=m.h.div({color:V.fb});function X(e){let{currentCount:t}=e;return Object(G.a)()?d.a.createElement($,null,d.a.createElement(H.ge,{size:"sm",className:K.toString()}),d.a.createElement(U.e,{as:Q},t,"/",F.v)):d.a.createElement(W,null,d.a.createElement(Z,null),d.a.createElement(J,null,t,"/",F.v))}var Y=n(44),ee=n(944),te=n(174),ne=n(45),ie=n(65);let se=Object(N.a)("transfer/page/recipient");const re="tab-request::start",ae="main:p2p:".concat(re,":node::"),ce="main:p2p:".concat(re),oe=(e,t)=>{const n=t.map(e=>e.contact);return u()(e,n,"id")},le=m.h.button({background:"none",border:"none",padding:0,outline:"inherit"});class pe extends d.a.Component{constructor(){super(...arguments),c()(this,"state",{isRecipientInputOnFocus:!1}),c()(this,"handleChangeRecipient",e=>{if(this.props.dispatch(E.changeCurrentRecipient(e)),this.props.currentRecipient.toLowerCase()===e.toLowerCase())return;const t=e.trim();e&&this.props.dispatch(C.r({query:t,includeDirect:!0,includeNonDirect:this.props.isDirectorySearchEligible,isRequestFlow:!0}))}),c()(this,"handleSelectContact",e=>{e.isUnilateral?this.props.dispatch(C.h({contact:e,onSingleRecipient:e=>{this.props.dispatch(E.multiSelectContact(e))}})):this.props.dispatch(E.multiSelectContact(e))}),c()(this,"handleSelectContactFromAutocomplete",e=>{if(!e)return;if(e.hasOwnProperty("type"))return void(e.type===F.b.PHONE_OR_EMAIL&&this.handleSubmitRecipient());Object(te.c)(!0,e);const{currentRecipient:t=""}=this.props;Object(I.c)(t)&&(e.billSplitDisplay=t),e.isUnilateral?this.props.dispatch(C.h({contact:e,onSingleRecipient:e=>{this.props.dispatch(E.multiSelectContact(e))}})):this.props.dispatch(E.multiSelectContact(e))}),c()(this,"handleRemoveRecipient",e=>{this.props.dispatch(E.removeRecipient(e))}),c()(this,"addRecipient",()=>{const{dispatch:e,currentRecipient:t,country:n,isAndroid:i}=this.props;let s=t;i&&s&&(s=s.replace(/;$|,$/,""));let r="";Object(x.f)(s)&&(r=Object(x.h)(s,n)),e(E.selectContact({email:s,displayName:r,index:-1},null,null,null,!1))}),c()(this,"handleTooltipAnalytics",()=>{var e;e="linkHelp",f.trackLink(e,ce,ae,"link")}),c()(this,"toggleInputFocus",e=>{"focus"===e.type&&Object(te.d)(!0,"DIR_SEARCH"),this.setState(e=>({isRecipientInputOnFocus:!e.isRecipientInputOnFocus}),()=>{const e=j.b||Object(j.a)();if(!Object(w.isIframe)()&&e){const e=this.state.isRecipientInputOnFocus?this._recipientInput:document.body;Object(T.a)(e,300)}})}),c()(this,"changeSelectedRecipientIndex",e=>{this.props.dispatch(E.changeSelectedRecipientIndex(e))}),c()(this,"handleSubmitRecipient",e=>{const{isCurrentRecipientValid:t,currentRecipient:n,recipients:i}=this.props;if(!n&&i.length)return this.handleSubmitPage(e);t&&(this.addRecipient(),Object(I.a)(n)?f.trackLink("clickEmailRecipientNext","main:consumer:p2p:transfer:multi:emailRecipient"):f.trackLink("clickPhoneNumberRecipientNext","main:consumer:p2p:transfer:multi:phoneNumberRecipient"),f.trackLink("clickRecipientNext","main:consumer:p2p:transfer:multi:typedRecipient"))}),c()(this,"pageSubmit",()=>{const{isCurrentRecipientValid:e,currentRecipient:t}=this.props;t&&e&&this.addRecipient()}),c()(this,"handleSubmitPage",e=>{e.preventDefault(),this.pageSubmit(),this.props.dispatch(E.advanceToRequestReview(ae,ce,{flfr:re})),Object(y.b)("/request/preview")}),c()(this,"handleBillSplittingSubmit",e=>{e.preventDefault(),this.pageSubmit(),this.props.dispatch(E.advanceToRequestReview(ae,ce,{flfr:re})),Object(y.b)("/split/preview")}),c()(this,"recipientOnlySubmitButton",()=>{const{currentRecipient:e,isCurrentRecipientValid:t,recipients:n}=this.props,i=e?!t:!n.length;return d.a.createElement(D.a,{"data-nemo":"multi-request-button",key:"multiRecipientSubmitButton",onClick:this.handleSubmitPage,tabIndex:"0",disabled:i},se("input.next"))}),c()(this,"onlyBillSplitButton",()=>{const{currentRecipient:e,isCurrentRecipientValid:t,recipients:n}=this.props,i=e?!t:!n.length;return d.a.createElement(D.a,{"data-nemo":"bill-split-button",key:"partnerSubmitButton",onClick:this.handleBillSplittingSubmit,tabIndex:"0",disabled:i},se("input.next"))}),c()(this,"renderSubmitButton",()=>{const{isEnrolledInBillSplitting:e,isBusinessUser:t,isExternalPartner:n}=this.props,i=e&&!t&&n;return d.a.createElement(S.CSSTransitionGroup,{transitionName:"buttonGrow",transitionEnterTimeout:750,transitionLeaveTimeout:500,className:"recipient-next","data-nemo":"submit"},i?this.onlyBillSplitButton():this.recipientOnlySubmitButton())}),c()(this,"renderTopContacts",()=>{let e=Object(L.a)()?this.props.topReceiveContacts:this.props.topContacts;return d.a.createElement(k.a,{contacts:e,flowType:this.props.flowType,hasFetchedContacts:this.props.hasFetchedContacts,shouldDimContactsList:this.state.isRecipientInputOnFocus&&this.props.currentRecipient,handleSelectContact:this.handleSelectContact,canUseInitials:this.props.canUseInitials,pageName:ae,pageGroup:ce,DesktopContactCircles:v.a,MobileContactCircles:v.a,isNewMobileView:!0})}),c()(this,"getTopContactsContainerProps",e=>{const{topReceiveContacts:t,flowType:n,hasFetchedContacts:i,canUseInitials:s}=this.props;return r()({contacts:t,flowType:n,hasFetchedContacts:i,handleSelectContact:this.handleSelectContact,canUseInitials:s,pageName:ae,pageGroup:ce},e)}),c()(this,"renderContacts",()=>{if(this.props.hasFetchedContacts)return this.renderTopContacts()}),c()(this,"renderBillSplitPartnerHeader",()=>{const{isEnrolledInBillSplitting:e,isExternalPartner:t,isBusinessUser:n}=this.props,i=!n&&e&&t;return i&&d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-md-12"},d.a.createElement("div",{className:"col-md-8 col-md-offset-2",style:{padding:"0px"}},d.a.createElement(B.a,null),d.a.createElement(P.a,{header:se("header.billSplittingSubText"),shouldDisplay:i}))))}),c()(this,"renderRecipientInput",()=>{const{recipients:e,country:t,currentRecipient:n,isCurrentRecipientValid:i,isAndroid:s,isPhoneSendRequestEligible:r}=this.props,a=e.length>=F.v,c=this.props.directionality||"ltr";let o=r?"homepage.request.placeholder.isPhoneSendRequestEligible":"homepage.request.placeholder.isNotPhoneSendRequestEligible",l="homepage.send.placeholder.isDirectorySearchEligibleNoNumber";e.length&&(l="placeholder.multi.anyoneElse",o="placeholder.multi.anyoneElse"),a&&(l="placeholder.multi.recipientLimitReached",o="placeholder.multi.recipientLimitReached");const p=r?"error.recipients.isPhoneSendRequestEligible":"error.recipients.isNotPhoneSendRequestEligible";return d.a.createElement(_.d,{innerRef:e=>this._recipientInput=e,onFocus:this.toggleInputFocus,onBlur:this.toggleInputFocus},d.a.createElement(q.a,{inputProps:{type:"text",id:"fn-requestRecipient",placeholder:this.props.isDirectorySearchEligible?se(l):se(o),dir:c,onChange:e=>this.handleChangeRecipient(e.target.value),"data-nemo":"recipient"},contacts:[...this.props.topContacts,...this.props.otherContacts,...this.props.searchedContacts],selectedRecipients:e,countryCode:t,recipient:n,onChange:this.handleSelectContactFromAutocomplete,removeRecipient:this.handleRemoveRecipient,submitRecipient:this.handleSubmitRecipient,submit:this.handleSubmitPage,isRecipientValid:i,errorMessage:se(p),isAndroid:s,excludeRecipients:oe}))}),c()(this,"renderHelper",()=>{const{recipients:e}=this.props,t=l()(e,"length",0);return d.a.createElement(X,{currentCount:t})}),c()(this,"renderTurnOnSearch",()=>{const{dispatch:e,consentType:t}=this.props;return Object(G.a)()?d.a.createElement(i.a,{as:le,type:"button","data-testid":"turnOnButton",onClick:()=>e(Object(Y.b)(!0,t))},se("autocomplete.turnOnSearch")):d.a.createElement("button",{type:"button",className:"vx_btn-link","data-testid":"turnOnButton",onClick:()=>e(Object(Y.b)(!0,t))},se("autocomplete.turnOnSearch"))})}componentDidMount(){const{dispatch:e,consentType:t="",searchTrackingDetails:n={}}=this.props;window.scrollTo({top:0,behavior:"smooth"}),ne.b.updateCommonProps({sub_flow:"request_money"}),Object(ie.a)(ne.b.p2p_flow_started()),Object(ie.a)(ne.b.p2p_contact_screen_shown()),e(C.f()),Object(ee.b)(t,n)&&e(Object(Y.A)({show:!0,isPreFlow:!0,analytics:{actionType:t}})),window.flfr=re}render(){return d.a.createElement(g.a,{title:se("a11y.title.request")},d.a.createElement("div",null,this.renderBillSplitPartnerHeader(),this.props.children({renderRecipientInput:this.renderRecipientInput,renderSubmitButton:this.renderSubmitButton,renderHelper:this.renderHelper,renderTurnOnSearch:this.renderTurnOnSearch,renderContacts:this.renderContacts,topContacts:Object(L.a)()?this.props.topReceiveContacts:this.props.topContacts,getTopContactsContainerProps:this.getTopContactsContainerProps,hasFetchedContacts:this.props.hasFetchedContacts,isDirectorySearchEligible:this.props.isDirectorySearchEligible}),d.a.createElement(A.a,{handleSubmit:e=>{this.props.dispatch(Object(Y.D)({show:!1})),this.props.dispatch(E.multiSelectContact(e))}}),d.a.createElement("div",null,d.a.createElement(O.a,null))))}}c()(pe,"defaultProps",{isPhoneSendRequestEligible:!1,isDirectorySearchEligible:!1});t.a=Object(R.b)(e=>{let{server:t,contacts:n,multiRecipient:i,amount:s,user:r,external:a}=e;return{canUseInitials:t.permissions.canUseInitials,isEnrolledInBillSplitting:t.isEnrolledInBillSplitting,country:t.country,directionality:t.directionality,isAndroid:t.isAndroid,contacts:oe(n.contacts,i.recipients),otherContacts:oe(n.otherContacts,i.recipients),topContacts:oe(n.topContacts,i.recipients),topReceiveContacts:oe(n.topReceiveContacts,i.recipients),searchedContacts:oe(n.searchedContacts,i.recipients),hasFetchedContacts:i.hasFetchedContacts,recipients:i.recipients,currentRecipient:i.currentRecipient,currentRecipientDisplayName:i.currentRecipientDisplayName,isCurrentRecipientValid:i.isCurrentRecipientValid,selectedRecipientIndex:i.selectedRecipientIndex,isBusinessUser:t.businessAccountInfo&&t.businessAccountInfo.isBusinessUser,amount:s.amount,isExternalPartner:a.isExternalPartner,timeZone:r.timeZone,isPhoneSendRequestEligible:t.isPhoneSendRequestEligible,isDirectorySearchEligible:t.isDirectorySearchEligible,searchTrackingDetails:t.searchTrackingDetails,consentType:t.consentType}})(pe)},1280:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return d}));var i=n(0),s=n.n(i),r=n(19),a=n(1059),c=n(893),o=n(887),l=n(29),p=n(977),u=n(60);const h=r.h.div("transferPage",{maxWidth:"1024px",margin:"0px auto 40px auto",position:"relative",top:"0px",overflow:"hidden",[l.m]:{top:"unset",margin:"0px auto 40px auto !important"}});function d(){return s.a.createElement(a.a,null,e=>{let{renderRecipientInput:t,renderSubmitButton:n,renderHelper:i,topContacts:r,getTopContactsContainerProps:a,hasFetchedContacts:l}=e;return s.a.createElement(h,null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement(o.d,{className:"col-md-offset-2"},s.a.createElement(c.e,null,s.a.createElement(c.c,null,t(),n(),Object(u.a)()?s.a.createElement(c.a,null,i()):s.a.createElement(c.b,null,i()))),s.a.createElement(o.e,null,l&&!!r.length&&s.a.createElement(p.a,a({contacts:r.slice(0,5)})))))))})}},1313:function(e,t,n){"use strict";n.r(t);var i=n(41),s=n(0),r=n.n(s),a=n(19),c=n(9),o=n(29),l=n(1059),p=n(893),u=n(887),h=n(977),d=n(1010),m=n(1),b=n(196),g=n(60);let R=Object(c.a)("transfer/page/recipient");const C=a.h.h2({marginTop:0,marginBottom:"0.625rem",[o.j]:{marginTop:"revert"}});t.default=function(){const e=!!d.b.length;return r.a.createElement(l.a,null,t=>{let{renderRecipientInput:n,renderSubmitButton:s,renderHelper:a,renderTurnOnSearch:c,topContacts:o,getTopContactsContainerProps:l,hasFetchedContacts:E,isDirectorySearchEligible:S}=t;return r.a.createElement(u.c,null,r.a.createElement(u.d,{className:e?"":"col-md-offset-2"},r.a.createElement(p.e,null,r.a.createElement(p.c,null,Object(g.a)()?r.a.createElement(i.f,{size:"sm",as:C},R("homepage.request.title.header")):r.a.createElement(p.g,null,R("homepage.request.title.header")),Object(g.a)()?r.a.createElement(i.d,null,Object(b.b)()?R("homepage.request.title.descriptionDW2",{maxRecipientsLimit:m.v}):R("homepage.request.title.description",{maxRecipientsLimit:m.v})):r.a.createElement(p.f,{size:"sm"},Object(b.b)()?R("homepage.request.title.descriptionDW2",{maxRecipientsLimit:m.v}):R("homepage.request.title.description",{maxRecipientsLimit:m.v})),n(),s(),S?r.a.createElement(r.a.Fragment,null,Object(g.a)()?r.a.createElement(p.a,null,a()):r.a.createElement(p.b,null,a())):r.a.createElement(p.h,null,c()))),r.a.createElement(u.e,null,E&&!!o.length&&r.a.createElement(h.a,l({contacts:o.slice(0,5)})))),e&&r.a.createElement(u.b,null,r.a.createElement(d.a,null)))})}}}]);
//# sourceMappingURL=request-page.esm.js.map