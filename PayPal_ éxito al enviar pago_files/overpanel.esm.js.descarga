(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{119:function(e,t,n){"use strict";var o=r(n(468)),i=r(n(341));function r(e){return e&&e.__esModule?e:{default:e}}e.exports={TransitionGroup:i.default,CSSTransitionGroup:o.default}},258:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},341:function(e,t,n){"use strict";t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=u(n(469)),r=u(n(0)),a=u(n(6)),s=(u(n(470)),n(471));function u(e){return e&&e.__esModule?e:{default:e}}a.default.any,a.default.func,a.default.node;var l=function(e){function t(n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,i));return r.performAppear=function(e,t){r.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(r._handleDoneAppearing.bind(r,e,t)):r._handleDoneAppearing(e,t)},r._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete r.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(r.props.children);n&&n.hasOwnProperty(e)||r.performLeave(e,t)},r.performEnter=function(e,t){r.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(r._handleDoneEntering.bind(r,e,t)):r._handleDoneEntering(e,t)},r._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete r.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(r.props.children);n&&n.hasOwnProperty(e)||r.performLeave(e,t)},r.performLeave=function(e,t){r.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(r._handleDoneLeaving.bind(r,e,t)):r._handleDoneLeaving(e,t)},r._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete r.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(r.props.children);n&&n.hasOwnProperty(e)?r.keysToEnter.push(e):r.setState((function(t){var n=o({},t.children);return delete n[e],{children:n}}))},r.childRefs=Object.create(null),r.state={children:(0,s.getChildMapping)(n.children)},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,s.getChildMapping)(e.children),n=this.state.children;for(var o in this.setState({children:(0,s.mergeChildMappings)(n,t)}),t){var i=n&&n.hasOwnProperty(o);!t[o]||i||this.currentlyTransitioningKeys[o]||this.keysToEnter.push(o)}for(var r in n){var a=t&&t.hasOwnProperty(r);!n[r]||a||this.currentlyTransitioningKeys[r]||this.keysToLeave.push(r)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach((function(t){return e.performEnter(t,e.childRefs[t])}));var n=this.keysToLeave;this.keysToLeave=[],n.forEach((function(t){return e.performLeave(t,e.childRefs[t])}))},t.prototype.render=function(){var e=this,t=[],n=function(n){var o=e.state.children[n];if(o){var a="string"!=typeof o.ref,s=e.props.childFactory(o),u=function(t){e.childRefs[n]=t};s===o&&a&&(u=(0,i.default)(o.ref,u)),t.push(r.default.cloneElement(s,{key:n,ref:u}))}};for(var a in this.state.children)n(a);var s=o({},this.props);return delete s.transitionLeave,delete s.transitionName,delete s.transitionAppear,delete s.transitionEnter,delete s.childFactory,delete s.transitionLeaveTimeout,delete s.transitionEnterTimeout,delete s.transitionAppearTimeout,delete s.component,r.default.createElement(this.props.component,s,t)},t}(r.default.Component);l.displayName="TransitionGroup",l.propTypes={},l.defaultProps={component:"span",childFactory:function(e){return e}},t.default=l,e.exports=t.default},342:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var o=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=o,e.exports=t.default},343:function(e,t,n){"use strict";t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};i(n(0));var o=i(n(6));function i(e){return e&&e.__esModule?e:{default:e}}t.nameShape=o.default.oneOfType([o.default.string,o.default.shape({enter:o.default.string,leave:o.default.string,active:o.default.string}),o.default.shape({enter:o.default.string,enterActive:o.default.string,leave:o.default.string,leaveActive:o.default.string,appear:o.default.string,appearActive:o.default.string})])},468:function(e,t,n){"use strict";t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=l(n(0)),r=l(n(6)),a=l(n(341)),s=l(n(472)),u=n(343);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}u.nameShape.isRequired,r.default.bool,r.default.bool,r.default.bool,(0,u.transitionTimeout)("Appear"),(0,u.transitionTimeout)("Enter"),(0,u.transitionTimeout)("Leave");var d=function(e){function t(){var n,o;c(this,t);for(var r=arguments.length,a=Array(r),u=0;u<r;u++)a[u]=arguments[u];return n=o=p(this,e.call.apply(e,[this].concat(a))),o._wrapChild=function(e){return i.default.createElement(s.default,{name:o.props.transitionName,appear:o.props.transitionAppear,enter:o.props.transitionEnter,leave:o.props.transitionLeave,appearTimeout:o.props.transitionAppearTimeout,enterTimeout:o.props.transitionEnterTimeout,leaveTimeout:o.props.transitionLeaveTimeout},e)},p(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return i.default.createElement(a.default,o({},this.props,{childFactory:this._wrapChild}))},t}(i.default.Component);d.displayName="CSSTransitionGroup",d.propTypes={},d.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},t.default=d,e.exports=t.default},469:function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter((function(e){return null!=e}))).length)return 1===t.length?t[0]:t.reduce((function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}))}},470:function(e,t,n){"use strict";e.exports=function(){}},471:function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=function(e){if(!e)return e;var t={};return o.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=e})),t},t.mergeChildMappings=function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var o={},i=[];for(var r in e)t.hasOwnProperty(r)?i.length&&(o[r]=i,i=[]):i.push(r);var a=void 0,s={};for(var u in t){if(o.hasOwnProperty(u))for(a=0;a<o[u].length;a++){var l=o[u][a];s[o[u][a]]=n(l)}s[u]=n(u)}for(a=0;a<i.length;a++)s[i[a]]=n(i[a]);return s};var o=n(0)},472:function(e,t,n){"use strict";t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=d(n(473)),r=d(n(475)),a=d(n(476)),s=n(477),u=d(n(0)),l=d(n(6)),c=n(66),p=n(343);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=[];s.transitionEnd&&h.push(s.transitionEnd),s.animationEnd&&h.push(s.animationEnd);l.default.node,p.nameShape.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.number,l.default.number,l.default.number;var v=function(e){function t(){var n,o;f(this,t);for(var i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];return n=o=m(this,e.call.apply(e,[this].concat(r))),o.componentWillAppear=function(e){o.props.appear?o.transition("appear",e,o.props.appearTimeout):e()},o.componentWillEnter=function(e){o.props.enter?o.transition("enter",e,o.props.enterTimeout):e()},o.componentWillLeave=function(e){o.props.leave?o.transition("leave",e,o.props.leaveTimeout):e()},m(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach((function(e){clearTimeout(e)})),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var o=(0,c.findDOMNode)(this);if(o){var a=this.props.name[e]||this.props.name+"-"+e,u=this.props.name[e+"Active"]||a+"-active",l=null,p=void 0;(0,i.default)(o,a),this.queueClassAndNode(u,o);var d=function(e){e&&e.target!==o||(clearTimeout(l),p&&p(),(0,r.default)(o,a),(0,r.default)(o,u),p&&p(),t&&t())};n?(l=setTimeout(d,n),this.transitionTimeouts.push(l)):s.transitionEnd&&(p=function(e,t){return h.length?h.forEach((function(n){return e.addEventListener(n,t,!1)})):setTimeout(t,0),function(){h.length&&h.forEach((function(n){return e.removeEventListener(n,t,!1)}))}}(o,d))}else t&&t()},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,a.default)((function(){return n.flushClassNameAndNodeQueue()})))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach((function(e){e.node.scrollTop,(0,i.default)(e.node,e.className)})),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=o({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,u.default.cloneElement(u.default.Children.only(this.props.children),e)},t}(u.default.Component);v.displayName="CSSTransitionGroupChild",v.propTypes={},t.default=v,e.exports=t.default},473:function(e,t,n){"use strict";var o=n(258);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,i.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var i=o(n(474));e.exports=t.default},474:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},475:function(e,t,n){"use strict";function o(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=o(e.className,t):e.setAttribute("class",o(e.className&&e.className.baseVal||"",t))}},476:function(e,t,n){"use strict";var o=n(258);t.__esModule=!0,t.default=void 0;var i,r=o(n(342)),a="clearTimeout",s=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-l)),o=setTimeout(e,n);return l=t,o},u=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};r.default&&["","webkit","moz","o","ms"].some((function(e){var t=u(e,"request");if(t in window)return a=u(e,"cancel"),s=function(e){return window[t](e)}}));var l=(new Date).getTime();(i=function(e){return s(e)}).cancel=function(e){window[a]&&"function"==typeof window[a]&&window[a](e)};var c=i;t.default=c,e.exports=t.default},477:function(e,t,n){"use strict";var o=n(258);t.__esModule=!0,t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var i,r,a,s,u,l,c,p,d,f,m,h=o(n(342)),v="transform";if(t.transform=v,t.animationEnd=a,t.transitionEnd=r,t.transitionDelay=c,t.transitionTiming=l,t.transitionDuration=u,t.transitionProperty=s,t.animationDelay=m,t.animationTiming=f,t.animationDuration=d,t.animationName=p,h.default){var y=function(){for(var e,t,n=document.createElement("div").style,o={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},i=Object.keys(o),r="",a=0;a<i.length;a++){var s=i[a];if(s+"TransitionProperty"in n){r="-"+s.toLowerCase(),e=o[s]("TransitionEnd"),t=o[s]("AnimationEnd");break}}!e&&"transitionProperty"in n&&(e="transitionend");!t&&"animationName"in n&&(t="animationend");return n=null,{animationEnd:t,transitionEnd:e,prefix:r}}();i=y.prefix,t.transitionEnd=r=y.transitionEnd,t.animationEnd=a=y.animationEnd,t.transform=v=i+"-"+v,t.transitionProperty=s=i+"-transition-property",t.transitionDuration=u=i+"-transition-duration",t.transitionDelay=c=i+"-transition-delay",t.transitionTiming=l=i+"-transition-timing-function",t.animationName=p=i+"-animation-name",t.animationDuration=d=i+"-animation-duration",t.animationTiming=f=i+"-animation-delay",t.animationDelay=m=i+"-animation-timing-function"}var g={transform:v,end:r,property:s,timing:l,delay:c,duration:u};t.default=g},860:function(e,t,n){"use strict";n.r(t);var o=n(2),i=n.n(o),r=n(14),a=n.n(r),s=n(4),u=n.n(s),l=n(0),c=n.n(l),p=n(19),d=n(40),f=n(119),m=n(216),h=n(9);let v=document.getElementById("js_foreground"),y={};let g=0;function b(){if(v){let e=v.style;e.position=y.position||"",e.overflow=y.overflow||"",e.top=y.top||0,window.scrollTo(0,g)}}var E=n(29),w=n(66),T=n.n(w);let O=document.getElementById("overpanel-root");O||(O=document.createElement("div"),O.id="overpanel-root",document.body.appendChild(O));class C extends c.a.Component{constructor(){super(...arguments),u()(this,"dom",document.createElement("div"))}componentDidMount(){O.appendChild(this.dom)}componentWillUnmount(){O.removeChild(this.dom)}render(){return T.a.createPortal(this.props.children,this.dom)}}var _=n(52),N=n(44),A=n(8),x=n(26);n.d(t,"DEFAULT_DURATION",(function(){return D})),n.d(t,"Overpanel",(function(){return q}));let L=Object(h.a)("inc/overpanel");const D=400,M="GLIMPSE",j=Object(d.css)({opacity:0}),k=Object(d.css)({opacity:1,transition:"opacity ".concat(D,"ms ease-in-out")}),P=Object(d.css)({opacity:1}),S=Object(d.css)({opacity:0,transition:"opacity ".concat(D,"ms ease-in-out")}),W=Object(d.css)({position:"fixed !important",transform:"translateY(100%)"}),R=Object(d.css)({position:"fixed !important",transform:"translateY(0)",transition:"transform ".concat(D,"ms ease-out")}),G=Object(d.css)({transform:"translateY(0)"}),I=Object(d.css)({transform:"translateY(100%)",transition:"transform ".concat(D,"ms ease-in")}),K=p.h.div({background:"rgba(210, 210, 210, .5)",position:"fixed",zIndex:1e3,top:0,right:0,bottom:0,left:0}),z=p.h.div({position:"absolute",right:0,left:0,top:0,bottom:0,zIndex:1050,overflow:"auto"}),B=p.h.div("col-xs-12",{minHeight:"100%",boxSizing:"border-box",padding:"70px 50px",backgroundColor:"white",[E.j]:{padding:"80px 30px"},":focus":{outline:"none"}},e=>{let{preset:t}=e;return t===M?"col-sm-8 col-sm-offset-2 col-lg-6 col-lg-offset-3":""}),U=p.h.div({":focus":{outline:"none"}}),F=p.h.button({position:"absolute",top:"0",right:"0",padding:"15px",margin:"10px",zIndex:100,background:"none",border:0});function Q(e){const{hideCloseButton:t}=e;return t?null:c.a.createElement(F,e,c.a.createElement("span",{className:"icon icon-close-small","aria-hidden":"true"}),c.a.createElement("span",{className:"accessAid"},L("button.close")))}class q extends c.a.Component{constructor(){super(...arguments),u()(this,"duration",this.props.styleOverrides.animationDuration||D),u()(this,"onShow",()=>{const{openOverpanelCount:e,onOverpanelOpen:t=(()=>{}),shouldCloseOnEsc:n,dispatch:o}=this.props;0===e&&function(){if(v){g=window.pageYOffset;let e=v.style;y.position=e.position,y.overflow=e.overflow,y.top=e.top,e.position="fixed",e.overflow="hidden",e.top="-".concat(g,"px"),window.scrollTo(0,0)}}(),o(N.a()),n&&document.addEventListener("keyup",this.handleEscKey),t()}),u()(this,"onClose",()=>{const{openOverpanelCount:e,shouldCloseOnEsc:t,dispatch:n}=this.props;1===e&&setTimeout(b,this.duration),n(N.e()),t&&document.removeEventListener("keyup",this.handleEscKey)}),u()(this,"handleEscKey",e=>{27===e.keyCode&&this.handleCloseOverpanel()}),u()(this,"handleCloseOverpanel",()=>{const{handleClose:e=(()=>{}),onClosed:t=(()=>{}),pageName:n,pageGroup:o}=this.props;n&&o&&Object(A.trackLink)("close",o,n,"link"),e(),t&&setTimeout(t,this.duration)})}componentDidMount(){this.props.show&&this.onShow()}componentWillUnmount(){this.props.show&&this.onClose()}componentDidUpdate(e){const{show:t}=this.props;t!==e.show&&(t?this.onShow():this.onClose())}render(){const{show:e,children:t,a11yTitle:n,preset:o="GLIMPSE",hideCloseButton:i,styleOverrides:r={}}=this.props;return c.a.createElement(C,null,c.a.createElement(f.CSSTransitionGroup,a()({transitionName:{enter:"".concat(j),enterActive:"".concat(k),leave:"".concat(P),leaveActive:"".concat(S)},transitionEnterTimeout:this.duration,transitionLeaveTimeout:this.duration},r.backgroundAnimation),e&&c.a.createElement(K,{key:"background",css:r.background})),c.a.createElement(f.CSSTransitionGroup,a()({transitionName:{enter:"".concat(W),enterActive:"".concat(R),leave:"".concat(G),leaveActive:"".concat(I)},transitionEnterTimeout:this.duration,transitionLeaveTimeout:this.duration},r.contentAnimation),e&&c.a.createElement(z,{key:"wrapper",style:{zIndex:this.props.zIndex||1050}},c.a.createElement(B,{preset:o,css:r.content,"data-pools-iframe-key":"overpanel"},c.a.createElement(m.a,{returnFocus:!0},c.a.createElement(U,{role:"dialog","aria-label":n,tabIndex:"-1","aria-modal":!0,"data-autofocus":!0},c.a.createElement(Q,{"data-autofocus":!0,onClick:this.handleCloseOverpanel,css:r.closeButton,hideCloseButton:i}),t))))))}}u()(q,"defaultProps",{styleOverrides:{},shouldCloseOnEsc:!0,hideCloseButton:!1,preset:"GLIMPSE"}),u()(q,"setAppElement",(function(e){v=e}));t.default=Object(_.b)(e=>{let{server:t,overpanels:n}=e;return{openOverpanelCount:n.openOverpanelCount,hideCloseButton:"pisp"===t.env&&"request"===Object(x.a)()}},null,(e,t,n)=>i()({},e,t,n))(q)}}]);
//# sourceMappingURL=overpanel.esm.js.map